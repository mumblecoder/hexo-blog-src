---
title: Design Pattern - Factory Method Pattern
date: 2020-02-20 16:16:34
tags: [pattern, factory, java]
categories: DesignPattern
---

` 기존 코드 구경하다가 따라하고싶은 코드를 발견했는데 그 코드가 팩토리 메소드 패턴으로 구현되어있었다. `

디자인 패턴에는 여러가지가 있는데 전에는 저게 무슨 의미가 있나 싶었는데 코드를 보다보니 공부의 필요성을 느끼게 되었다.
먼저 디자인 패턴이 무엇인가에 대해 찾아봤다.
`소프트웨어를 설계할 때 특정 맥락에서 자주 발생하는 고질적인 문제들이 또 발생했을 때 재사용할 할 수있는 훌륭한 해결책`
`바퀴를 다시 발명하지 마라(Don’t reinvent the wheel)`
적절한 디자인 패턴을 사용한다면 빠르고 편하게 코딩을 할 수 있는것 같다.
물론 내가 본 팩토리 메소드 패턴의 코드도 그렇게 느꼈다.

이제 팩토리 메소드 패턴에 대해 알아보자
`객체를 만들어내는 부분을 서브 클래스에 위임하는 패턴.`
`즉, new 키워드를 호출하는 부분을 서브 클래스에 위임. 결국 객체를 만들어내는 공장을 만드는 패턴`
늘 그렇듯이 정의만으로는 이해가 안된다. 사례를 들어 이해해보도록하자.

하나의 피자가게가 운영이 잘되서 가맹점을 여기저기 내려고 한다.
가게주인이 가맹점주들에게 피자만드는 법을 알려주었다.
어떤 점주는 도우 숙성을 빼먹고, 어떤 점주는 포장을 잘못하는 등 여기저기 문제가 발생했다.
그래서 주인은 메뉴얼을 만들어 제공하였다.
메뉴얼에는
피자는 재료준비 > 도우숙성 > 토핑 > 굽기 > 포장 순서로 준비되며, 포장방법은 동일하게 박스에 넣어 덮고 끈으로 묶어준다 라고 되어있다.
점주들은 메뉴얼대로 피자를 준비하고 가게특성에 따라 재료만 다르게 또는 굽는 방법만 다르게 하여 피자를 만들기 시작했다.
메뉴얼이 제공되니 포장을 잘못하는 경우가, 도우숙성을 빼먹는경우가 발생하지 않았다.

위와 같은 경우에 팩토리 메소드 패턴을 사용했다고 볼 수 있다.
점주들이 각각의 객체이고 메뉴얼이 객체들이 상속받을 클래스 또는 인터페이스이다.
점주들은 주인에게 받은 메뉴얼을 바탕으로 자기 점포에 맞는 메뉴얼을 작성할 것이다.
전체적인 구성은 받은 메뉴얼대로 가되 포장방법은 이미 적혀있어 따로 적을 필요가 없고 가게에 맞게 수정할 부분은 수정해서 메뉴얼을 작성하면 된다.

위 과정을 코딩하는걸로 비유하자면 
1. 중복된 코드가 줄어든다. (포장방법이 메뉴얼에 있으므로 점주들이 따로 쓸 필요가 없다)
2. 누락되는 공정이 생길리 없다. (상속받아서 메서드를 전부 가지고 있으므로)
3. 새 점주가 생겨도 메뉴얼이 있어 교육이 쉽다. (새 객체는 상속만 받으면 쉽게 만들수 있다.)

그런데 제일 중요한 작업이 빠졌다. 
주인에게 가맹점을 등록하듯이 팩토리에도 객체를 등록해야 사용할 수 있다.
등록과정이 없으면 객체가 이 공장 객체인지 저 공장 객체인지 알 수 없기 때문이다.
팩토리에 등록을 해놓으면 객체 생성시 이름만 주면 원하는 객체를 생성할 수 있다. (아래는 예시일뿐. 팩토리 내부 코드에 따라 달라짐.)
` ex) .create("CheesePizza") > CheesePizza 생성 / .create("PotatoPizza") > PotatoPizza 생성 `


구글링 조금만 해도 코드 예제는 넘쳐나기에 굳이 적지 않는걸로...
아래 참고자료를 보면 좋은 예제와 함께 이해가 더 잘 될듯 하다.

+글 쓰는데 2시간 넘게 걸림... 말로 주절주절 설명은 되겠는데... 글로 쓰려니 너무 어렵... 

**참고자료**
[참고글1](https://johngrib.github.io/wiki/factory-method-pattern/)
[참고글2](https://jdm.kr/blog/180)
[참고글3](https://biggwang.github.io/2019/06/28/Design%20Patterns/[Design%20Patterns]%20%ED%8C%A9%ED%86%A0%EB%A6%AC%20%ED%8C%A8%ED%84%B4,%20%EB%8F%84%EB%8C%80%EC%B2%B4%20%EC%99%9C%20%EC%93%B0%EB%8A%94%EA%B1%B0%EC%95%BC-%EA%B8%B0%EB%B3%B8%20%EC%9D%B4%EB%A1%A0%ED%8E%B8/)
