---
title: 개발시 지양해야할 방법들
date: 2019-12-26 11:54:28
tags: [java, sql]
categories: MyProject
---

` 회사에서 개발을 하다보니 그동안 하던 방식들이 잘못됨을 느꼈다. 나름 편하고 효율적이라 생각하며 쓴 방법들이 보안에 취약하거나 오히려 더 오래걸리는 경우가 종종 발생했다.`

개발을 하면서 하지 말아야겠다고, 이왕이면 쓰지 말자고 싶은 것들을 매번 이 글에 작성할 예정이다.
적어두고도 까먹고 또 쓰는 경우가 있겠지만 이 글을 업데이트하면서 보다보면 안 쓰지 않을까싶다...

### 1. mybatis mapper 파일에서 $를 쓰지말자.
주로 #을 사용하지만 가끔 문자 그대로 박으면 편해보여서 $를 쓰고 싶을때가 있다.
매우 안좋다고 한다... 보안에 취약하다고 한다... SQL Injection 공격 받기 좋다고 한다...


### 2. type=hidden input 태그는 꼭 필요한 경우에만
그냥 페이지에서만 안 보이지 개발자 도구 켜면 누구나 볼 수 있는게 hidden타입의 input 태그다.
사용하는 유저를 믿지 말라고 한다. 무슨 짓을 할 지 모르니 Client단으로는 최소한의 정보만 보여주라고 한다.
예를 들면 올해 재수생들이 개발자 도구를 이용하여 수능 성적을 미리 조회했다. 
번거롭더라도 최소한의 정보만 보여주고 그 정보를 받아 서버에서 처리하는게 안전하다고 한다.


### 3. DB에 갈 일을 줄여라
지금 회사 서버만해도 sqlSession을 생성하여 DB에 갖다오는 시간이 꽤 걸린다. 
그래봤자 1초 안걸리는 작업이지만 반복되면 답 없다...
내가 개발한 부분에서도 DB에 갖다오는 횟수를 줄이니 처리시간이 훨씬 빨라졌다. 
DB에 접속할 일이 있다면 최대한 많은 일을 하고 많은걸 가져오는게 좋다고 한다.
내 경우에는 mapper에서 foreach문으로 다중 insert/update를 하던지 select문으로 왕창 가져와 조건문 또는 반복문으로 데이터를 나눠 사용했다.


### 4. 쓰던 방법만 쓰려고 하지말자
계속 업데이트되고 새로운게 나오는데 지금 쓰는 방법이 지금이야 좋지 나중에도 좋다는법이 없다.
지금 당장 더 좋은 방법이 있는데 모르고 있을수도 있고...
요즘엔 코드 짜는 시간보다 구글링 시간이 더 긴거 같기도 하다...
최근 허무했던건 테이블 pk값 설정이다. 
기존에는 컬럼 자료형을 integer로 만들고 sequence를 만들어서 default 값을 nextval('temp_seq') 로 설정했는데
애초에 컬럼 자료형을 serial로 하면 sequence, default 값이 자동 생성/설정 된다고 한다. (postgresql)
테이블을 drop하면 sequence도 자동 drop!
<br>

### 5. SubQuery 보단 JOIN, WHERE절에는 SubQuery 쓰지말것
서브쿼리보다는 JOIN이 훨씬 좋다고 한다. 특히 WHERE절의 subquery는 성능이 많이 떨어진다고 한다.
SELECT문의 경우 WITH절을 사용하면 서브쿼리보다 보기좋고 성능좋은 쿼리를 작성할 수 있다. 


### 6. 의미있는 이름을 쓰자
학원다닐때는 dto, list 등 간단한 이름들을 많이 사용했는데, 이제 그러면 나중가서 후회한다. 처음보는 사람이라도 무슨 용도인지, 어떤 데이터가 저장되어있는지 감이 올 수 있도록 의미있는 이름을 쓰도록하자.

### 7. (2020.02.13) 시키는대로, 알려주는대로만 하지말고 의문을 갖고 개발하자
시키는대로, 구글링해서 찾은대로만 하다보면 개발은 하지만 막상 혼자 할때는 어려운거 같다. 왜 이렇게 하는지에 의문을 가져야 이해도 되고 응용도 가능한 것 같다. 최근에 Factory구조? 로 된 코드를 보면서 왜 이런 구조를 택했는지 어떤 방식으로 처리되는지 계속 의문을 갖다보니 이해가 되었고 어느새 나도 혼자 그 구조로 개발을 하고 있었다. 이렇게 되나보다 하면서 어림짐작으로 기존 코드를 따라하기만 했다면 쓰기는 쓰되 혼자 새로 만들진 못했을것 같다.


`지금 생각나는건 여기까지 앞으로도 이 글에 계속 추가할 예정!`


